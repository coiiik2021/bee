<!DOCTYPE html>
<html lang="en" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{/admin/template}">
<head>
    <meta charset="UTF-8">
    <title>Chi tiết Khach Hang</title>
    <script>
        function updatePhotoPreview(input) {
            const preview = document.getElementById('customerPhoto'); // Sửa tên ID
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result; // Cập nhật src với kết quả đọc được
                    preview.style.display = 'block'; // Hiển thị ảnh
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
    </script>
</head>
<body>
<main class="content px-3 py-4" layout:fragment="main">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/admin/index">Trang chủ</a></li>
            <li class="breadcrumb-item"><a href="/admin/customer">Customer</a></li>
            <li class="breadcrumb-item active" aria-current="page">Chi tiết</li>
        </ol>
    </nav>    <form th:action="@{/admin/customer/update}" th:object="${customer}" method="post">
        <div class="form-group mb-4" style="display: flex; justify-content: center;">
            <img id="customerPhoto" th:src="@{'/images/customers/' + ${customer.photo}}" alt="customer Photo" width="150" height="150" class="img-thumbnail" style="cursor: pointer;" onclick="document.getElementById('photoInput').click();"/>
            <input type="file" id="photoInput" name="photo" accept="image/*" style="display: none;" onchange="updatePhotoPreview(this);"/> <!-- Sửa tham số -->
        </div>
        <input type="hidden" name="id" th:value="${customer.id}" />
        <input type="hidden" name="createdDate" th:value="${customer.createdDate}" />
        <input type="password" name="password" th:value="${customer.password}" class="form-control" hidden/>

        <div class="form-group">
            <label>Username</label>
            <input type="text" name="username" th:value="${customer.username}" class="form-control" required readonly/>
        </div>

        <div class="form-group">
            <label>Fullname</label>
            <input type="text" name="fullname" th:value="${customer.fullname}" class="form-control" required/>
        </div>

        <div class="form-group">
            <label>Email</label>
            <input type="email" name="email" th:value="${customer.email}" class="form-control" required/>
            <span th:if="${#fields.hasErrors('email')}" th:errors="*{email}" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label>Country</label>
            <input type="text" name="country" th:value="${customer.country}" class="form-control" required/>
        </div>
        <div class="row">
            <div class="form-group col-md-4">
                <label>City</label>
                <input type="text" name="city" th:value="${customer.city}" class="form-control" required/>
            </div>
            <div class="form-group col-md-4">
                <label>District</label>
                <input type="text" name="district" th:value="${customer.district}" class="form-control" required/>
            </div>
            <div class="form-group col-md-4">
                <label>Ward</label>
                <input type="text" name="ward" th:value="${customer.ward}" class="form-control" required/>
            </div>
        </div>
        <div class="form-group">
            <label>Address</label>
            <input type="text" name="address" th:value="${customer.address}" class="form-control" required/>
        </div>
        <div class="form-group">
            <label>Phone</label>
            <input type="text" name="phone" th:value="${customer.phone}" class="form-control" maxlength="10" pattern="0\d{9}" title="Số điện thoại phải gồm 10 số và bắt đầu bằng 0" required/>
            <span th:if="${#fields.hasErrors('phone')}" th:errors="*{phone}" class="text-danger"></span>
        </div>
        <div class="form-group">
            <label>Status</label><br>
            <input type="radio" name="status" value="1" th:checked="${customer.status == 1}"> Active
            <input type="radio" name="status" value="0" th:checked="${customer.status == 0}"> Inactive
        </div>
        <div class="d-flex justify-content-center">
            <button type="submit" class="btn btn-outline-primary me-2">Update</button>
            <a th:href="@{/admin/customer}" class="btn btn-outline-primary">Cancel</a>
        </div>
    </form>
</main>
</body>
</html>
